<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUESTION-BANK</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 8px;
            padding: 0;
            background-color: #0a1d37;
            color: #333;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #2d3e50;
            padding: 20px;
            color: white;
            border-bottom: 2px solid #ddd;
            transition: background 1.0s ease;
        }
        header:hover {
            background: #009688;
        }
        h1 {
            font-size: 2.9em;
            margin: 30px;
            font-weight: bold;
            background-image: linear-gradient(to top, #009688, #2d3e50);
        }
        h2 {
            color: white;
        }
        nav button {
            margin: 5px;
            padding: 12px 25px;
            background-color: #009688;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: transform 0.6s, background 0.6s ease;
        }
        nav button:hover {
            background-color: #2d3e50;
            transform: scale(1.25);
        }
        form {
            display: flex;
            flex-direction: column;
            margin-top: 20px;
            background: #88b18d;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        label {
            margin-top: 10px;
            font-size: 1.1em;
        }
        input, select, button {
            margin-top: 5px;
            padding: 10px;
            font-size: 1.1em;
            border: 1px solid #ccc;
            border-radius: 5px;
            background: #7a9a92;
        }
        button {
            background-color: #009688;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
        #questionList div {
            margin-bottom: 20px;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
            background-color: #009688;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        #questionList div:hover {
            transform: scale(1.03);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        img {
            margin-top: 10px;
            max-width: 100%;
            border-radius: 5px;
            transition: opacity 0.3s ease;
        }
        .delete-btn {
            margin-top: 10px;
            background-color: #800000;
            color: white;
            border: none;
            padding: 5px 8px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 0.8em;
        }
    
    #drawingCanvas {
            border: 1px solid black;
            cursor: crosshair;
        touch-action:none;
        }
        button {
            margin-top: 10px;
            padding: 10px;
            background-color: #009688;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
    </style>
</head>
<body>
    <header>
        <h1>Question-Bank</h1>
        <nav>
            <button onclick="showAddForm()">Add Question</button>
            <button onclick="showChapters('math')">View Math Chapters</button>
            <button onclick="showChapters('physics')">View Physics Chapters</button>
            <button onclick="showChapters('chemistry')">View Chemistry Chapters</button>
            <button onclick="downloadPDF()">Download PDF</button>
        </nav>
    </header>
    
    <section id="add-question-form" style="display-none;">
        <h2>Add a New Question</h2>
        <form id="questionForm">
            <label for="subject">Subject- </label>
            
            <select id="subject" name="subject" required onchange="loadChapters(this.value)">
                <option value="">Select</option>
                <option value="math">Math</option>
                <option value="physics">Physics</option>
                <option value="chemistry">Chemistry</option>
            </select>

            <label for="chapter">Chapter:</label>
            <select id="chapter" name="chapter" required>
                <option value="">Select or Create a New Chapter</option>
            </select>

            <button type="button" onclick="createNewChapter()">Create New Chapter</button>

            <label for="question-image">Question Image:</label>
            <input type="file" id="question-image" name="question-image" accept="image/*" required>

            <label for="solution-image">Solution Image:</label>
            <input type="file" id="solution-image" name="solution-image" accept="image/*">

            <button type="submit">Add Question</button>
        </form>
    </section>

    <section id="questions-display" style="display:none;">
        <h2>Saved Questions</h2>
        <div id="questionList"></div>
    </section>
    
    <canvas id="drawingCanvas" width="500" height="300" style="border:1px solid #000;"></canvas>
    <canvas id="drawCanvas" width="800" height="400"></canvas>
    <button onclick="clearCanvas()">Clear Canvas</button>


    <script>
    let remainingBalanceAccount1 = 0;
    let remainingBalanceAccount2 = 0;
    let currentAccount = 'Account 1'; // Default selected account

    // On page load, load balances and transactions for selected account
    document.addEventListener("DOMContentLoaded", () => {
        remainingBalanceAccount1 = parseFloat(localStorage.getItem("remainingBalanceAccount1")) || 0;
        remainingBalanceAccount2 = parseFloat(localStorage.getItem("remainingBalanceAccount2")) || 0;
        updateBalanceDisplay();
        loadTransactions();
    });

    // Account selection dropdown event
    document.getElementById("account-select").addEventListener("change", (e) => {
        currentAccount = e.target.value;
        updateBalanceDisplay();
        loadTransactions();
    });

    // Update balance display based on selected account
    function updateBalanceDisplay() {
        if (currentAccount === 'Account 1') {
            document.getElementById("remaining-balance").textContent = remainingBalanceAccount1.toFixed(2);
        } else {
            document.getElementById("remaining-balance").textContent = remainingBalanceAccount2.toFixed(2);
        }
    }

    // Set the initial balance for selected account
    document.getElementById("set-balance").addEventListener("click", () => {
        const startingBalance = parseFloat(document.getElementById("starting-balance").value);
        if (!isNaN(startingBalance)) {
            if (currentAccount === 'Account 1') {
                remainingBalanceAccount1 = startingBalance;
                saveRemainingBalance();
            } else {
                remainingBalanceAccount2 = startingBalance;
                saveRemainingBalance();
            }
            resetTransactions();
        } else {
            alert("Please enter a valid starting balance.");
        }
    });

    // Add a transaction
    document.getElementById("expense-form").addEventListener("submit", function (e) {
        e.preventDefault();

        const type = document.getElementById("type").value;
        const description = document.getElementById("description").value;
        const amount = parseFloat(document.getElementById("amount").value);
        const dateTime = getCurrentDateTime();

        if (!description || isNaN(amount) || amount <= 0) {
            alert("Please enter valid details!");
            return;
        }

        // Update balance for the selected account
        if (currentAccount === 'Account 1') {
            if (type === "Expense") {
                remainingBalanceAccount1 -= amount;
            } else {
                remainingBalanceAccount1 += amount;
            }
            saveRemainingBalance();
        } else {
            if (type === "Expense") {
                remainingBalanceAccount2 -= amount;
            } else {
                remainingBalanceAccount2 += amount;
            }
            saveRemainingBalance();
        }

        const transaction = { dateTime, type, description, amount, balance: (currentAccount === 'Account 1' ? remainingBalanceAccount1 : remainingBalanceAccount2) };
        saveTransaction(transaction);
        addTransactionToTable(transaction);
        resetForm();
    });

    // Save remaining balance to local storage
    function saveRemainingBalance() {
        if (currentAccount === 'Account 1') {
            localStorage.setItem("remainingBalanceAccount1", remainingBalanceAccount1.toFixed(2));
        } else {
            localStorage.setItem("remainingBalanceAccount2", remainingBalanceAccount2.toFixed(2));
        }
        updateBalanceDisplay();
    }

    // Save transaction to local storage
    function saveTransaction(transaction) {
        const transactions = getTransactionsFromStorage();
        transactions.push(transaction);
        localStorage.setItem("transactions", JSON.stringify(transactions));
    }

    // Load transactions from local storage
    function loadTransactions() {
        const transactions = getTransactionsFromStorage();
        const transactionList = document.getElementById("transaction-list");
        transactionList.innerHTML = "";
        transactions.forEach(transaction => {
            if (transaction.balance === (currentAccount === 'Account 1' ? remainingBalanceAccount1 : remainingBalanceAccount2)) {
                addTransactionToTable(transaction);
            }
        });
    }

    // Retrieve transactions from local storage
    function getTransactionsFromStorage() {
        const transactions = localStorage.getItem("transactions");
        return transactions ? JSON.parse(transactions) : [];
    }

    // Add transaction to table
    function addTransactionToTable(transaction) {
        const transactionList = document.getElementById("transaction-list");
        const row = document.createElement("tr");

        const typeClass = transaction.type === 'Income' ? 'income' : 'expense';
        row.classList.add(typeClass);

        row.innerHTML = `
            <td>${transaction.dateTime}</td>
            <td>${transaction.type}</td>
            <td>${transaction.description}</td>
            <td>${transaction.amount.toFixed(2)}</td>
            <td>${transaction.balance.toFixed(2)}</td>
            <td><button onclick="deleteTransaction(this)">Delete</button></td>
        `;

        transactionList.appendChild(row);
    }

    // Reset transactions and clear local storage
    function resetTransactions() {
        localStorage.setItem("transactions", JSON.stringify([]));
        document.getElementById("transaction-list").innerHTML = "";
        saveRemainingBalance();
    }

    // Delete a transaction
    function deleteTransaction(button) {
        const row = button.closest("tr");
        const type = row.children[1].textContent;
        const amount = parseFloat(row.children[3].textContent);
        const currentBalance = parseFloat(row.children[4].textContent);

        const transactions = getTransactionsFromStorage();
        const updatedTransactions = transactions.filter(transaction => 
            !(transaction.dateTime === row.children[0].textContent && 
              transaction.type === type &&
              transaction.amount === amount));
        localStorage.setItem("transactions", JSON.stringify(updatedTransactions));

        // Update the remaining balance for the selected account
        if (currentAccount === 'Account 1') {
            if (type === 'Income') {
                remainingBalanceAccount1 -= amount;
            } else {
                remainingBalanceAccount1 += amount;
            }
        } else {
            if (type === 'Income') {
                remainingBalanceAccount2 -= amount;
            } else {
                remainingBalanceAccount2 += amount;
            }
        }

        saveRemainingBalance();
        loadTransactions();
    }

    // Get current date and time in DDMMYYYY format
    function getCurrentDateTime() {
        const now = new Date();
        
        const day = String(now.getDate()).padStart(2, '0');
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const year = now.getFullYear();

        return `${day}${month}${year}`;
    }

    // Reset the form fields
    function resetForm() {
        document.getElementById("description").value = "";
        document.getElementById("amount").value = "";
    }
</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>
</html>